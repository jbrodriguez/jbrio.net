<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="author"
  content="{{ if .Params.author }}
    {{ .Params.author }}
  {{ else }}
    {{ range .Site.Author }}{{ . }}{{ end }}
  {{ end }}"
/>
<meta
  name="description"
  content="{{ if .IsHome }}
    {{ .Site.Params.homeSubtitle }}
  {{ else }}
    {{ if .Params.Description }}
      {{ .Params.Description }}
    {{ else }}
      {{ .Summary | plainify }}
    {{ end }}
  {{ end }}"
/>
<meta
  name="keywords"
  content="{{ .Site.Params.keywords }}{{ if .Params.tags }}
    {{ range .Params.tags }}, {{ . }}{{ end }}
  {{ end }}"
/>
<meta name="robots" content="noodp" />

<!-- HTML in your document's head -->
<link rel="preconnect" href="https://rsms.me/" />
<link rel="stylesheet" href="https://rsms.me/inter/inter.css" />

{{ block "title" . }}
  <title>
    {{ if .IsHome }}
      {{ $.Site.Title }}
      {{ with $.Site.Params.Subtitle }}— {{ . }}{{ end }}
    {{ else }}
      {{ .Title }} :: {{ $.Site.Title }}
      {{ with $.Site.Params.Subtitle }}— {{ . }}{{ end }}
    {{ end }}
  </title>
{{ end }}

{{- partial "favicons.html" . }}

{{ template "_internal/schema.html" . }}
{{ partial "twitter.html" . }}


<script>
  // On page load or when changing themes, best to add inline in `head` to avoid FOUC
  if (
    localStorage.getItem("color-theme") === "dark" ||
    (!("color-theme" in localStorage) &&
      window.matchMedia("(prefers-color-scheme: dark)").matches)
  ) {
    document.documentElement.classList.add("dark");
  } else {
    document.documentElement.classList.remove("dark");
  }
</script>

{{ $styles := resources.Get "/css/style.css" | postCSS }}
{{ if .Site.IsServer }}
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}" />
{{ else }}
  {{ $styles := $styles | minify | fingerprint | resources.PostProcess }}
  <link
    rel="stylesheet"
    href="{{ $styles.RelPermalink }}"
    integrity="{{ $styles.Data.Integrity }}"
  />
{{ end }}
